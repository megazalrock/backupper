---
name: implementation-plan-creator
description: 構造化された実装計画を作成する。ユーザーが実装計画書の作成を要求したとき、開発タスクを整理する必要があるとき、または構造化された計画が必要な新機能について議論した後に使用する。`.mgzl/implementations`ディレクトリに、ステップバイステップの実装ガイダンス、難易度評価、確認事項を含む`.md`ファイルを生成する。
---

# 実装計画作成

## 概要

建設業界向け業務管理システムのための構造化された実行可能な実装計画を作成する。機能要件を、論理的なステップ、難易度評価、時間見積もり、確認が必要な項目を含む詳細な実装ドキュメントに変換する。

## このスキルを使用するタイミング

以下の場合に積極的にこのスキルを使用する：

1. **ユーザーが実装計画を要求** - 「実装計画を作成してください」
2. **新機能の議論が終了** - スケジュール管理、案件管理などの要件について議論した後
3. **技術的決定が行われた** - 「この方針で進めましょう」
4. **複数の要件が提供された** - ユーザーが実装する機能や改善点をリストアップ
5. **複雑な変更が計画された** - アーキテクチャ変更、リファクタリング、または多段階の機能

## ワークフロー

### ステップ1: 要件分析と明確化

ユーザー要件を徹底的に分析する：

1. **スコープを理解する**
   - どのような機能や変更が要求されているか？
   - どのドメインに影響するか？（スケジュール、案件、勤怠、書類など）
   - ユーザーの目標は何か？

2. **プロジェクトの制約を考慮する**
   - スケジュール関連機能：主な担当範囲
   - スケジュール以外の機能：修正前に明示的な確認が必要
   - 既存のアーキテクチャ：Atomic Design、Pinia、Nuxt 3、Vitest

3. **必要に応じて明確化の質問をする**
   - UI/UXの詳細
   - ビジネスロジックの要件
   - 既存機能との統合ポイント
   - パフォーマンス要件

### ステップ2: 実装ステップの分割

実装を論理的でテスト可能なステップに分割する：

**ステップの構造：**
- **ステップ名と概要**
- **難易度レベル**（低/中/高/最高）
- **具体的な実装内容**
- **影響範囲**（ファイル、コンポーネント、API）
- **想定所要時間**
- **前提条件と依存関係**

**難易度の基準：**
- **低**：既存パターンの適用、単純なCRUD操作
- **中**：新規コンポーネント作成、複数ファイルの連携
- **高**：アーキテクチャ変更、複雑なビジネスロジック
- **最高**：大規模リファクタリング、パフォーマンス最適化

**ステップのガイドライン：**
- 各ステップは独立して実装とテストが可能であること
- ステップ間の依存関係を明確に定義する
- テスト実装も計画に含める
- 後方互換性を考慮する

### ステップ3: 確認事項の特定

実装前に確認が必要な項目をリストアップする：

各確認事項について以下を指定する：
- **確認内容**：何を確認する必要があるか
- **確認先**：誰に確認するか（バックエンドチーム、デザイナー、PMなど）
- **理由**：なぜ確認が必要か
- **影響**：確認結果が実装にどう影響するか

一般的な確認事項のカテゴリ：
- API仕様と契約
- UI/UXデザインの詳細
- ビジネスルールの仕様
- パフォーマンス要件
- セキュリティ考慮事項

### ステップ4: 実装計画ドキュメントの作成

`.mgzl/implementations/`にMarkdownファイルを生成する：

**ファイル命名規則：** `yyyy-MM-dd-[implementation-plan-name].md`
- 実装計画名は英語を使用
- 単語の区切りはハイフンを使用
- 名前は簡潔で説明的に保つ

**ドキュメント構造：** `references/implementation-template.md`のテンプレートを使用

主要セクション：
1. **概要**：目的と背景
2. **実装ステップ**：難易度、影響範囲、時間見積もりを含む詳細な実装ステップ
3. **不明点・確認事項**：確認の詳細を含む確認事項
4. **技術的考慮事項**：TypeScript厳格モード、テスト戦略、パフォーマンスへの影響
5. **リスクと対策**：リスクと緩和策

### ステップ5: 調査と人間への確認

計画作成後：

1. **`implementation-plan-investigator`エージェントを使用**して不明点を解決する
   - 既存のコードベースパターンを調査
   - 技術的実現可能性を調査
   - 参考となる類似実装を探す

2. **残りの不明点について利用して人間に確認を要請**する
   - 調査結果を提示
   - 外部確認が必要な項目を強調
   - 各確認事項が実装に与える影響を説明

### ステップ6: 結果の報告

以下の形式でユーザーに報告する：

```
✅ 実装計画を作成しました

📄 ファイル: [作成したファイルのパス]
📊 ステータス: 計画レビュー中
📝 実装ステップ数: [N]ステップ
⏱️ 想定総所要時間: [X]時間

❓ 確認が必要な不明点（[N]件）:
1. [不明点1のタイトル]
   - 確認内容: [内容]
   - 確認先: [確認先]

2. [不明点2のタイトル]
   ...

次のステップ: 上記の不明点について確認をお願いします。確認後、実装を開始できます。
```

### ステップ7: ファイルを開くかどうかユーザーに尋ねる

`AskUserQuestion` ツールを利用して、 `mcp__jetbrains__open_file_in_editor` ツールを使用して作成した実装計画ファイルを開くかどうかユーザーに尋ねる。

## 重要な制約

- **プロジェクトの制約**：常にCLAUDE.mdの制限を考慮する
- **スケジュール機能への注力**：スケジュール機能以外の修正は明示的な確認が必要
- **既存のアーキテクチャ**：Atomic Design、Pinia、Nuxt 3のパターンに従う
- **テストの包含**：計画には常にテスト実装を含める（Vitest使用）
- **実行には承認が必要**：実装計画は実行前に明示的な人間の承認を受ける必要がある

## 技術的考慮事項チェックリスト

すべての計画に以下を含める：

1. **TypeScript**：型安全性のアプローチ、避けられない`as`/`any`の使用
2. **テスト**：ユニットテスト、統合テスト、テストカバレッジ戦略
3. **パフォーマンス**：バンドルサイズ、ランタイムパフォーマンス、レンダリングへの影響
4. **アクセシビリティ**：ARIA属性、キーボードナビゲーション、スクリーンリーダーサポート
5. **エラーハンドリング**：エラー状態、バリデーション、ユーザーフィードバック
6. **状態管理**：Piniaストアの設計、永続化戦略
7. **API統合**：エンドポイント設計、リクエスト/レスポンス処理、エラーハンドリング

## リソース

### references/implementation-template.md

実装計画ドキュメントの標準テンプレート。すべての必須セクションとプレースホルダーテキストを含む推奨構造が含まれている。

新しい実装計画を作成する際にこのテンプレートを読み込み、すべての計画ドキュメント全体で一貫性を確保する。

## ナレッジ

- [開発制約・ルール （@.claude/rules/development-constraints.md）](../../rules/development-constraints.md)
- [命名規則 （@.claude/rules/naming-conventions.md）](../../rules/naming-conventions.md)
- [TypeScript規約 （@.claude/rules/typescript-conventions.md）](../../rules/typescript-conventions.md)
- [型ガードユーティリティ （@.claude/rules/type-guard-utilities.md）](../../rules/type-guard-utilities.md)
- [テストガイドライン （@.claude/rules/test/testing-guidelines.md）](../../rules/tests/testing-guidelines.md)
